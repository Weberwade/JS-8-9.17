# 数组（Array）

# 1.数组简介

## 1.1 数组介绍

1. 数组和对象一样是复合数据类型，数组可以存储多个不同类型的数据
2. 数组中存储的是**有序**的数据，对象是无序数据，数组中的每个数据都由一个唯一的索引，可以通过索引来操作获取数据
3. 数组中存储的数据叫元素
3. 数组通过`typeof`检查也会返回`Object`，只有`function`特殊会返回`function`
3. 注意！创建数组时尽量要**确保数组中存储的元素的类型是相同的**
3. 注意！如果一个数组中的元素还是数组，则这个数组我们就称为二维数组

## 1.2 索引（index）

+ 索引是一组大于等于0的整数

# 2.数组创建及使用流程

## 2.1 创建数组

1. 通过`new Array()`构造函数来创建数组

   + `````````javascript
     const arr = new Array()

2. 通过`数组名 = []`数字字面量来创建数组

   + ````````````javascript
     const arr2 = []

## 2.2 数组中添加内容

1. 通过索引向数组中添加内容

   + 语法

     + `数组[索引] = 元素`

   + ``````````javascript
     const arr = new Array()
     arr[0] = 1
     arr[1] = 2
     arr[2] = 3
     console.log(arr); // [1,2,3]
     ``````````

   + 可以通过索引任意覆盖之前的元素

   + 跳跃索引的添加元素会数组会留出空位，这叫做非连续数组，因为它的性能不好
   
2. 数组字面量可以在定义式直接添加元素

   + 语法

     + `const 数组名 = [元素1,元素2,元素3,元素4,元素5]`

   + ```````````javascript
     const arr2 = [1,2,3,4,5]
     console.log(arr2); // [1,2,3,4,5]

## 2.3 数组的读取

1. 通过索引读取数组中的元素

   + 索引从0开始，从左到右以此类推

   + 语法

     + `数组[索引]`

   + `````````````javascript
     const arr = new Array()
     arr[0] = 1
     arr[1] = 2
     arr[2] = 3
     console.log(arr[1]); // 2
     `````````````

   + 读取没有设定元素的索引不会报错会返回`undefined`

# 3.数组的属性和方法

## 3.1 数组的属性

### 3.1.1 length

+ 检查数组的长度

+ 获取的实际值是数组的最大索引+1

+ 因为`arr.length`等于最大索引+1，所以可以**利用`arr[arr.length] = 元素`向数组的最后位置添加元素**

+ `length`是可以修改的，数组改长会在数组后添加空属性，数组改短会删除长度以外的元素

+ 语法

  + `数组名.length`

  + ``````````javascript
            const arr = new Array()
            arr[0] = 1
            arr[1] = 2
            arr[2] = 3
            console.log(arr.length); // 3
        ``````````

## 3.2 数组的方法

+ [Array - JavaScript | MDN (mozilla.org)](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array)MDN数组文档

### 3.2.1 实例方法（非破坏性）

#### 3.2.1.1 `at()`

+ 可以根据索引获取数组中的指定元素

+ `at()`可以接受负索引作为参数，-1为最后一个索引，-2为倒数第二个索引，以此类推

+ ````````````javascript
          const arr = ['孙悟空','猪八戒','沙和尚','唐僧']
        
          console.log(arr.at(-1)); // 唐僧
  ````````````

#### 3.2.1.2 `concat()`

+ 用来连接两个或多个数组

+ 非破坏性方法，不会影响原数组，返回值返回一个新数组

+ ``````javascript
          const arr = ['孙悟空','猪八戒','沙和尚','唐僧']
          const arr2 = ['白骨精','蜘蛛精','黄风怪','牛魔王']
          const arr3 = arr.concat(arr2,['铁扇公主','红孩儿'])
          console.log(arr3);
        		// ['孙悟空','猪八戒','沙和尚','唐僧','白骨精','蜘蛛			精','黄风怪','牛魔王','铁扇公主','红孩儿']
  ``````

#### 3.2.1.3 `indexOf()`

+ 获取元素在数组中第一次出现的位置

+ 参数

  1. 要查询的元素
  2. 查询的起始位置

+ ````````````javascript
  const arr = ['孙悟空', '猪八戒', '沙和尚', '唐僧','沙和尚']
  let result = arr.indexOf('沙和尚')
  console.log(result); // 2
  ````````````

+ 返回值

  1. 找到了则返回元素的索引
  2. 没找到则返回-1

#### 3.2.1.4 `lastIndexOf()`

+ 获取元素在数组中最后一次出现的位置

+ 参数

  1. 要查询的元素
  2. 查询的起始位置索引

+ ```````````javascript
  const arr = ['孙悟空', '猪八戒', '沙和尚', '唐僧','沙和尚']
  let result = arr.lastIndexOf('沙和尚',3)
  console.log(result); // 2
  ```````````

+ 返回值

  1. 找到了则返回元素的索引
  2. 没找到则返回-1

#### 3.2.1.5 `join()`

+ 将一个数组中的所有元素连接为一个字符串

+ 参数：

  1. 指定一个字符串作为连接符

+ ``````javascript
  const arr = ['孙悟空', '猪八戒', '沙和尚', '唐僧','沙和尚']
  let result = arr.join('^.^')
  console.log(result); // 孙悟空^.^猪八戒^.^沙和尚^.^唐僧^.^沙和尚
  ``````

#### 3.2.1.6 `slice()`

+ 用来截取数组（非破坏性方法）
+ 参数

  1. 截取的起始位置索引（包括起始位置元素）
  2. 截取的结束位置索引（不包括结束位置元素）
     + 结束位置可以省略不写，如果省略则会一直截取到数组最后索引

+ 参数特点

    1. 参数中索引可以是负值，-1就是倒数第一，-2倒数第二，以此类推
    1. 如果将两个参数全部省略，则可以对数组进行浅拷贝（浅复制）


+ ````````````javascript
  const arr = ['孙悟空', '猪八戒', '沙和尚', '唐僧','沙和尚']
  let result = arr.slice(0 , 2)
  console.log(result); // ['孙悟空', '猪八戒']
  ````````````

#### 3.2.1.7 forEach()

+ 用来遍历数组

+ 参数

  + 它需要一个回调函数作为参数，这个回调函数会被调用多次
    + 数组中有几个元素，回调函数就会调用多少次
    + 每次调用都会将数组中的数据作为回调函数实参传递
    + 回调函数中有三个实参
      + 遍历出的元素
      + 遍历到的元素的索引
      + 当前正遍历的数组

+ `````````````javascript
          arr = [9, 5, 6, 7, 8, 10, 1, 5]
          arr.forEach((element , index , array)=>{
              console.log(element);
          }) // 等于遍历出了arr数组的所有元素

#### 3.2.1.8 filter()

+ 将数组中符合条件的元素保存到一个新数组中返回

+ 非破坏性方法，不会影响原数组，返回新数组

+ 参数

  + 需要一个回调函数作为参数，会为每一个元素去调用回调函数，并根据返回值来决定是否将元素添加到新数组
    + 回调函数中的参数
      1.  遍历到数组中的每一个元素
      2.  遍历到的元素的索引
      3.  整个数组

+ ``````````````javascript
          arr = [1,2,3,4,5,6,7,8]
          let result = arr.filter((ele，index,array)=>{
              return ele % 2 === 0
          })
          console.log(result);
          // [2, 4, 6, 8]
  ``````````````

#### 3.2.1.9 map()

+ 根据当前数组生成一个新数组

+ 非破坏性方法

+ 参数

  + 需要一个回调函数作为参数，回调函数的返回值会称为新数组中的元素，数组有多少元素回调函数执行多少次
  + 回调函数中的参数
    1. 遍历到的元素
    2. 遍历到的元素的索引
    3. 整个数组

+ ``````javascript
  arr = [1,2,3,4,5,6,7,8]
  let result = arr.map(ele=>ele * 2)
  console.log(result);//[2, 4, 6, 8, 10, 12, 14, 16]
  ``````

#### 3.2.1.10 reduce()

+ 用来将一个数组中的所有元素整合为一个值

+ 参数

  1. 回调函数，通过回调函数指定合并规则
  2. 可选参数，初始值

+ ```````````````javascript
          arr = [1,2,3,4,5,6,7,8]
          let result = arr.reduce((a,b)=>{
              return a + b
          },10)
          console.log(result); // 46
      ```````````````

#### 3.2.1.11 includes()

+ 用来检查一个数组中是否存在检查的元素

+ 参数

  + 被检查是否存在的元素

+ `````````javascript
  检查的数组.includes(被检查的元素)

### 3.2.2 实例方法（破坏性）

#### 3.2.2.1 push()

+ 向数组的末尾添加一个或多个元素，并将数组的长度作为返回值返回

+ ````````````javascript
  const arr = ['孙悟空', '猪八戒', '沙和尚']
  let result = arr.push('唐僧')
  console.log(arr); // ['孙悟空', '猪八戒', '沙和尚', '唐僧']
  console.log(result); // 4

#### 3.2.2.2 pop()

+ 删除数组的最后一个元素，并将最后一个元素作为返回值返回

+ 调用几次`pop`删除几个元素

+ ``````javascript
  const arr = ['孙悟空', '猪八戒', '沙和尚']
  let result = arr.pop()
  console.log(arr); // ['孙悟空', '猪八戒']
  console.log(result); // 沙和尚

#### 3.2.2.3 unshift()

+ 向数组的开头添加一个或多个元素，并将数组长度作为返回值返回

+ `````````javascript
  const arr = ['孙悟空', '猪八戒', '沙和尚']
  let result = arr.unshift('牛魔王')
  console.log(arr); // ['牛魔王', '孙悟空', '猪八戒', '沙和尚']
  console.log(result); // 4

#### 3.2.2.4 shift()

+ 删除数组的第一个元素，并将删除的元素作为返回值返回

+ ```````````````javascript
  const arr = ['孙悟空', '猪八戒', '沙和尚']
  let result = arr.shift()
  console.log(arr); // ['猪八戒', '沙和尚']
  console.log(result); // 孙悟空
  ```````````````

#### 3.2.2.5 splice()

+ 可以删除、插入、替换数组中的元素

+ 参数

  1. 操作数组的索引位置
  2. 从操作数组的索引开始删除的数量
  3. 从操作数组的索引插入一个元素

  + 小技巧
    + 删除一个添加一个 = 替换
    + 删除0个插入一个或多个 = 插入
  + 注意！
    + 第一个参数操作数组的索引位置，如果大于数组的最大索引，那么就等于数组的最大索引+1开始！

+ 返回值

  1. 返回被删除的元素

+ ````javascript
  // 删除
  const arr = ['孙悟空', '猪八戒', '沙和尚','唐僧']
  let result = arr.splice(1,2)
  console.log(arr); // ['孙悟空', '唐僧']
  console.log(result); // ['猪八戒', '沙和尚']
  ````

+ ``````````javascript
  // 插入
  const arr = ['孙悟空', '猪八戒', '沙和尚','唐僧']
  let result = arr.splice(1,0,'牛魔王')
  console.log(arr); // ['孙悟空', '牛魔王', '猪八戒', '沙和尚', '唐僧']
  console.log(result); // []
  ``````````

+ `````````javascript
  // 替换
  const arr = ['孙悟空', '猪八戒', '沙和尚','唐僧']
  let result = arr.splice(1,1,'牛魔王')
  console.log(arr); // ['孙悟空', '牛魔王', '沙和尚', '唐僧']
  console.log(result); // ['猪八戒']
  `````````

#### 3.2.2.6 reverse()

+ 反转数组

+ 返回值

  + 将反转的数组返回

+ `````````javascript
  const arr = ['孙悟空', '猪八戒', '沙和尚','唐僧']
  let result = arr.reverse()
  console.log(arr); // ['唐僧', '沙和尚', '猪八戒', '孙悟空']
  console.log(result); // ['唐僧', '沙和尚', '猪八戒', '孙悟空']
  `````````

#### 3.2.2.7 sort()

+ 用来对数组进行排序（破坏性）
+ sort()默认会将数组升序排列
  + 注意：sort默认会按照Unicode编码排序，所以如果直接通过sort对数字排序可能会得到一个错误的结果
+ 参数
  1. 可以传递一个回调函数作为参数，通过回调函数来指定排序规则
     + `(a, b) =>  a - b` 升序排列数字
     + `(a, b) =>  b - a` 降序排列数字

# 4.数组的遍历

+ 遍历数组简单理解，就是获取到数组中的每一个元素

## 4.1 使用`for`循环正向遍历

+ ````javascript
          const arr = [1, 2, 3, 4, 5, 6, 7]
          for (let i = 0; i < arr.length; i++) {
              console.log(arr[i]);
          } // 1 2 3 4 5 6 7 
  ````

## 4.2 使用`for`循环反向遍历

+ `````javascript
          const arr = [1, 2, 3, 4, 5, 6, 7]
          for (let i = arr.length-1 ; i >= 0; i--) {
              console.log(arr[i]);
          } // 7 6 5 4 3 2 1
      `````

## 4.3 `for-of`语句遍历

+ `for-of`语句可以用来遍历可迭代对象

+ 语法

  + `for(let 变量 of 可迭代的对象){ 语句... }`

+ 执行流程

  + 可迭代对象中有多少元素就执行多少次，每一次执行都会将一个元素赋值给for-of中的变量，所以我们只需要接收for-of循环中定义的变量，即可遍历数组

+ `````````````javascript
          const arr = [1,2,3,4,5,6]
          for(let i of arr){
              console.log(i);
          } // 1 2 3 4 5 6 
  `````````````

+ 缺点！只能从前往后遍历，没有for循环那么灵活

# 5.对象的复制

+ 注意事项！复制必须产生新的对象，所以对象间的**传址不是复制**

## 5.1 复制数组对象方法

### 5.1.1 使用`slice`浅拷贝一个数组对象

+ 当调用`slice`时，会产生一个新的数组对象，从而完成对数组的复制

+ ```````````javascript
  const arr = ['孙悟空', '猪八戒', '沙和尚']
  let arr3 = arr.slice()
  console.log(arr === arr3); // false
  ```````````

### 5.1.2 使用`...`（展开运算符）浅拷贝

+ 将一个数组中的内容在其他数组中展开或者作为函数的参数传递

+ 通过它可以对数组进行浅复制

+ `````````javascript
  const arr = ['孙悟空', '猪八戒', '沙和尚']
  const arr2 = ['唐僧',...arr]
  console.log(arr2) // ['唐僧', '孙悟空', '猪八戒', '沙和尚']

### 5.1.3 使用`structuredClone()`深拷贝

+ 专门用来深拷贝的方法

+ ``````````````javascript
  const arr = [{name:'孙悟空'},{name:'猪八戒'}]
  const arr3 = structuredClone(arr)
  console.log(arr3[0] === arr[0]); // flase
  ``````````````

+ `arr3[0] === arr[0]`返回`false`说明数组对象中的对象也被拷贝了不是同一个对象，所以进行了深拷贝

## 5.2 浅拷贝和深拷贝

### 5.2.1 浅拷贝（shallow copy）

1. 通常对对象的拷贝都是浅拷贝
2. 浅拷贝顾名思义，只对对象的浅层进行复制（只复制一层）
3. 如果对象中存储的数据是原始值，那么拷贝的深浅就不重要了
4. 浅拷贝只会对对象本身进行复制，不会复制对象中的属性（或元素）

+ `````````````javascript\
  const arr = [{name:'孙悟空'},{name:'猪八戒'}]
  const arr2 = arr.slice()
  console.log(arr2[0] === arr[0]); // true
  `````````````

+ 总结

  + 浅拷贝，只拷贝外层，但是内部属性或元素并没有变

### 5.2.2 深拷贝（ deep copy）

1. 深拷贝指不仅复制对象本身，还复制对象中的属性或元素
2. 因为性能问题，通常情况下不太实用新拷贝
3. JS中有一个专门进行深拷贝的方法` structuredClone()`（5.1复制数组对象方法中有详细说明）

+ `````````````javascript
  const arr = [{name:'孙悟空'},{name:'猪八戒'}]
  const arr3 = structuredClone(arr)
  console.log(arr3[0] === arr[0]); // flase
  `````````````

+ 总结

  + 深拷贝不仅仅复制对象外层，会连同对象中的属性或元素一同复制，创建出一个或多个新对象

